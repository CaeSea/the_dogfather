$(document).ready(function(){navigator.userAgent.match(/SamsungBrowser/i)&&screen.width<400&&($("#gal1").css("display","none"),$("#gal2").css("display","none"),$(".landing-strip-title-wrapper").css("margin-top","10px"))}),function(e){e.cookie=function(i,t,o){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(t))||null==t)){if(o=e.extend({},o),null==t&&(o.expires=-1),"number"==typeof o.expires){var a=o.expires,n=o.expires=new Date;n.setDate(n.getDate()+a)}return t=String(t),document.cookie=[encodeURIComponent(i),"=",o.raw?t:encodeURIComponent(t),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}for(var s,r=(o=t||{}).raw?function(e){return e}:decodeURIComponent,l=document.cookie.split("; "),c=0;s=l[c]&&l[c].split("=");c++)if(r(s[0])===i)return r(s[1]||"");return null},e.fn.cookieBar=function(i){var t=e.extend({closeButton:"none",hideOnClose:!0,secure:!1,path:"/",domain:""},i);return this.each(function(){var i=e(this);e(".ui-widget").hide(),i.hide(),"none"==t.closeButton&&(i.append('<a class="cookiebar-close">Continue</a>'),e.extend(t,{closeButton:".cookiebar-close"})),"hide"!=e.cookie("cookiebar")&&(e(".ui-widget").fadeIn(1e3),i.fadeIn(1e3)),i.find(t.closeButton).click(function(){return t.hideOnClose&&i.hide(),e.cookie("cookiebar","hide",{path:t.path,secure:t.secure,domain:t.domain,expires:30}),i.trigger("cookieBar-close"),!1})})},e.cookieBar=function(i){e("body").prepend('<div class="ui-widget"><div style="display: none;" class="cookie-message ui-widget-header blue"><p>By using this website you agree to our use of cookies. For more information <a class="cookie-link" href="/terms.html">click here.</a></p></div></div>'),e(".cookie-message").cookieBar(i)}}(jQuery),$(document).ready(function(){$(".back-to-top").hide(),$("a").on("click",function(e){if(""!==this.hash){e.preventDefault();var i=this.hash;$("html, body").animate({scrollTop:$(i).offset().top},800,function(){window.location.hash=i})}}),$(window).scroll(function(){$(this).scrollTop()>150?$(".back-to-top").fadeIn():$(".back-to-top").fadeOut()});var e=null;$(window).scroll(function(){null!==e&&clearTimeout(e),e=setTimeout(function(){$(".back-to-top").fadeOut()},2e3)})});const ContactFormValidation=function(){const e=["#name","#email","#tel","#message"];function i(e){const i=e.target;if("email"===i.id){if(!$(i).val()&&$(i).hasClass("dirty"))return $(i).addClass("invalid"),void $(".error-message").text("Please enter a value for all required fields");if(!o($("#email").val())&&$("#email").val())return $(i).addClass("invalid"),void $(".error-message").text("Please enter a valid email address");o($("#email").val()&&$(i).val())&&$(i).hasClass("invalid")&&$(i).removeClass("invalid")}else!$(i).val()&&$(i).hasClass("dirty")?($(i).addClass("invalid"),$(".error-message").text("Please enter a value for all required fields")):$(i).hasClass("invalid")&&$(i).removeClass("invalid")}function t(i){const t=i.target;$(e[0]).val()&&$(e[1]).val()&&$(e[2]).val()&&$(e[3]).val()&&o($("#email").val())?$("#submit").attr("disabled",!1):$("#submit").attr("disabled",!0),$(t).hasClass("pristine")&&$(t).removeClass("pristine").addClass("dirty"),$(t).hasClass("invalid")&&$(t).val()&&$(t).removeClass("invalid"),$(".invalid").length||$(".error-message").text("")}function o(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function a(e){const i=window.event?e.keyCode:e.which;(i<48||i>57)&&(0==i||8==i||13==i||e.ctrlKey||e.preventDefault())}return{init:function(){for(let o of e)$(o).on("keyup",t),$(o).on("focusout",i);$("#tel").on("keydown",a)}}}();$(document).ready(function(){ContactFormValidation.init()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJyb3dzZXJzLmpzIiwiY29va2llYmFyLmpzIiwic21vb3Roc2Nyb2xsLmpzIiwidmFsaWRhdGlvbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIm1hdGNoIiwic2NyZWVuIiwid2lkdGgiLCJjc3MiLCJjb29raWUiLCJrZXkiLCJ2YWx1ZSIsIm9wdGlvbnMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ0ZXN0IiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwiZXh0ZW5kIiwiZXhwaXJlcyIsImRheXMiLCJ0IiwiRGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwiU3RyaW5nIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmF3IiwidG9VVENTdHJpbmciLCJwYXRoIiwiZG9tYWluIiwic2VjdXJlIiwiam9pbiIsInBhaXIiLCJkZWNvZGUiLCJzIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicGFpcnMiLCJzcGxpdCIsImkiLCJmbiIsImNvb2tpZUJhciIsInNldHRpbmdzIiwiY2xvc2VCdXR0b24iLCJoaWRlT25DbG9zZSIsInRoaXMiLCJlYWNoIiwiY29va2llYmFyIiwiaGlkZSIsImFwcGVuZCIsImZhZGVJbiIsImZpbmQiLCJjbGljayIsInRyaWdnZXIiLCJwcmVwZW5kIiwialF1ZXJ5Iiwib24iLCJldmVudCIsImhhc2giLCJwcmV2ZW50RGVmYXVsdCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJ0b3AiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNjcm9sbCIsImZhZGVPdXQiLCJ0aW1lciIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJDb250YWN0Rm9ybVZhbGlkYXRpb24iLCJpbnB1dHMiLCJhZGRPclJlbW92ZVZhbE1lc3NhZ2UiLCJlIiwiaW5wdXQiLCJ0YXJnZXQiLCJpZCIsInZhbCIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJ0ZXh0IiwidmFsaWRhdGVFbWFpbCIsInJlbW92ZUNsYXNzIiwiY2hlY2tGb3JFbXB0eSIsImF0dHIiLCJlbWFpbCIsInRvTG93ZXJDYXNlIiwiaXNOdW1iZXJLZXkiLCJrZXlDb2RlIiwid2hpY2giLCJjdHJsS2V5IiwiaW5pdCJdLCJtYXBwaW5ncyI6IkFBQ0FBLEVBQUFDLFVBQUFDLE1BQUEsV0FDQUMsVUFBQUMsVUFBQUMsTUFBQSxvQkFDQUMsT0FBQUMsTUFBQSxNQUNBUCxFQUFBLFNBQUFRLElBQUEsVUFBQSxRQUNBUixFQUFBLFNBQUFRLElBQUEsVUFBQSxRQUNBUixFQUFBLGdDQUFBUSxJQUFBLGFBQUEsV0NHQSxTQUFBUixHQUNBQSxFQUFBUyxPQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsR0FDQUMsVUFBQUMsT0FBQSxLQUNBLFNBQUFDLEtBQUFDLE9BQUFDLFVBQUFDLFNBQUFDLEtBQUFSLEtBQUEsTUFDQUEsR0FFQSxDQU9BLEdBTkFDLEVBQUFaLEVBQUFvQixPQUFBLEdBQUFSLEdBRUFELE1BQUFBLElBQ0FDLEVBQUFTLFNBQUEsR0FHQSxpQkFBQVQsRUFBQVMsUUFBQSxDQUNBLElBQUFDLEVBQUFWLEVBQUFTLFFBQ0FFLEVBQUFYLEVBQUFTLFFBQUEsSUFBQUcsS0FDQUQsRUFBQUUsUUFBQUYsRUFBQUcsVUFBQUosR0FLQSxPQUZBWCxFQUFBZ0IsT0FBQWhCLEdBRUFWLFNBQUFRLE9BQUEsQ0FDQW1CLG1CQUFBbEIsR0FDQSxJQUNBRSxFQUFBaUIsSUFBQWxCLEVBQUFpQixtQkFBQWpCLEdBQ0FDLEVBQUFTLFFBQUEsYUFBQVQsRUFBQVMsUUFBQVMsY0FBQSxHQUNBbEIsRUFBQW1CLEtBQUEsVUFBQW5CLEVBQUFtQixLQUFBLEdBQ0FuQixFQUFBb0IsT0FBQSxZQUFBcEIsRUFBQW9CLE9BQUEsR0FDQXBCLEVBQUFxQixPQUFBLFdBQUEsSUFDQUMsS0FBQSxJQVVBLElBUEEsSUFPQUMsRUFQQUMsR0FEQXhCLEVBQUFELEdBQUEsSUFDQWtCLElBQ0EsU0FBQVEsR0FDQSxPQUFBQSxHQUVBQyxtQkFFQUMs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QUQsRUFBQUUsT0FFQTlFLEVBQUEwRSxFQUFBLElBQUFNLE9BQ0FoRixFQUFBMEUsRUFBQSxJQUFBTSxPQUNBaEYsRUFBQTBFLEVBQUEsSUFBQU0sT0FDQWhGLEVBQUEwRSxFQUFBLElBQUFNLE9BQ0FJLEVBQUFwRixFQUFBLFVBQUFnRixPQUVBaEYsRUFBQSxXQUFBdUYsS0FBQSxZQUFBLEdBRUF2RixFQUFBLFdBQUF1RixLQUFBLFlBQUEsR0FFQXZGLEVBQUE2RSxHQUFBSSxTQUFBLGFBQ0FqRixFQUFBNkUsR0FDQVEsWUFBQSxZQUNBSCxTQUFBLFNBRUFsRixFQUFBNkUsR0FBQUksU0FBQSxZQUFBakYsRUFBQTZFLEdBQUFHLE9BQ0FoRixFQUFBNkUsR0FBQVEsWUFBQSxXQUVBckYsRUFBQSxZQUFBYyxRQUNBZCxFQUFBLGtCQUFBbUYsS0FBQSxJQUlBLFNBQUFDLEVBQUFJLEdBRUEsTUFEQSwwSkFDQXpFLEtBQUFZLE9BQUE2RCxHQUFBQyxlQUdBLFNBQUFDLEVBQUFkLEdBQ0EsTUFBQWUsRUFBQXpCLE9BQUFQLE1BQUFpQixFQUFBZSxRQUFBZixFQUFBZ0IsT0FDQUQsRUFBQSxJQUFBQSxFQUFBLE1BRUEsR0FBQUEsR0FBQSxHQUFBQSxHQUFBLElBQUFBLEdBQUFmLEVBQUFpQixTQUNBakIsRUFBQWYsa0JBS0EsTUFBQSxDQUNBaUMsS0FwRkEsV0FDQSxJQUFBLElBQUFqQixLQUFBSCxFQUNBMUUsRUFBQTZFLEdBQUFuQixHQUFBLFFBQUE0QixHQUNBdEYsRUFBQTZFLEdBQUFuQixHQUFBLFdBQUFpQixHQUVBM0UsRUFBQSxRQUFBMEQsR0FBQSxVQUFBZ0MsS0FSQSxHQTJGQTFGLEVBQUFDLFVBQUFDLE1BQUEsV0FDQXVFLHNCQUFBcUIiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XHJcbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaXNTYW1zdW5nQnJvd3NlciA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1NhbXN1bmdCcm93c2VyL2kpO1xyXG4gICAgaWYgKGlzU2Ftc3VuZ0Jyb3dzZXIgJiYgc2NyZWVuLndpZHRoIDwgNDAwKSB7XHJcbiAgICAgICQoXCIjZ2FsMVwiKS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgICAgJChcIiNnYWwyXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgICAkKFwiLmxhbmRpbmctc3RyaXAtdGl0bGUtd3JhcHBlclwiKS5jc3MoXCJtYXJnaW4tdG9wXCIsIFwiMTBweFwiKTtcclxuICAgIH1cclxuICB9KTtcclxufSkoKTtcclxuIiwiLyohXHJcbiAqIGpRdWVyeSBDb29raWViYXIgUGx1Z2luXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jYXJsd29vZGhvdXNlL2pxdWVyeS5jb29raWVCYXJcclxuICpcclxuICogQ29weXJpZ2h0IDIwMTItMTcsIENhcmwgV29vZGhvdXNlLiB0aGUgY29va2llIGZ1bmN0aW9uIGlzIGluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9jYXJoYXJ0bC9qcXVlcnktY29va2llXHJcbiAqIERpc2NsYWltZXI6IGlmIHlvdSBzdGlsbCBnZXQgZmluZWQgZm9yIG5vdCBjb21wbHlpbmcgd2l0aCB0aGUgZXUgY29va2llbGF3LCBpdCdzIG5vdCBvdXIgZmF1bHQuXHJcbiAqIExpY2VuY2U6IE1JVFxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigkKSB7XHJcbiAgJC5jb29raWUgPSBmdW5jdGlvbihrZXksIHZhbHVlLCBvcHRpb25zKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAxICYmXHJcbiAgICAgICghL09iamVjdC8udGVzdChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpKSB8fFxyXG4gICAgICAgIHZhbHVlID09PSBudWxsIHx8XHJcbiAgICAgICAgdmFsdWUgPT09IHVuZGVmaW5lZClcclxuICAgICkge1xyXG4gICAgICBvcHRpb25zID0gJC5leHRlbmQoe30sIG9wdGlvbnMpO1xyXG5cclxuICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBvcHRpb25zLmV4cGlyZXMgPSAtMTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmV4cGlyZXMgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICB2YXIgZGF5cyA9IG9wdGlvbnMuZXhwaXJlcyxcclxuICAgICAgICAgIHQgPSAob3B0aW9ucy5leHBpcmVzID0gbmV3IERhdGUoKSk7XHJcbiAgICAgICAgdC5zZXREYXRlKHQuZ2V0RGF0ZSgpICsgZGF5cyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhbHVlID0gU3RyaW5nKHZhbHVlKTtcclxuXHJcbiAgICAgIHJldHVybiAoZG9jdW1lbnQuY29va2llID0gW1xyXG4gICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChrZXkpLFxyXG4gICAgICAgIFwiPVwiLFxyXG4gICAgICAgIG9wdGlvbnMucmF3ID8gdmFsdWUgOiBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpLFxyXG4gICAgICAgIG9wdGlvbnMuZXhwaXJlcyA/IFwiOyBleHBpcmVzPVwiICsgb3B0aW9ucy5leHBpcmVzLnRvVVRDU3RyaW5nKCkgOiBcIlwiLCAvLyBtYXgtYWdlIGlzIG5vdCBzdXBwb3J0ZWQgYnkgSUVcclxuICAgICAgICBvcHRpb25zLnBhdGggPyBcIjsgcGF0aD1cIiArIG9wdGlvbnMucGF0aCA6IFwiXCIsXHJcbiAgICAgICAgb3B0aW9ucy5kb21haW4gPyBcIjsgZG9tYWluPVwiICsgb3B0aW9ucy5kb21haW4gOiBcIlwiLFxyXG4gICAgICAgIG9wdGlvbnMuc2VjdXJlID8gXCI7IHNlY3VyZVwiIDogXCJcIlxyXG4gICAgICBdLmpvaW4oXCJcIikpO1xyXG4gICAgfVxyXG4gICAgb3B0aW9ucyA9IHZhbHVlIHx8IHt9O1xyXG4gICAgdmFyIGRlY29kZSA9IG9wdGlvbnMucmF3XHJcbiAgICAgID8gZnVuY3Rpb24ocykge1xyXG4gICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgfVxyXG4gICAgICA6IGRlY29kZVVSSUNvbXBvbmVudDtcclxuXHJcbiAgICB2YXIgcGFpcnMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoXCI7IFwiKTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBwYWlyOyAocGFpciA9IHBhaXJzW2ldICYmIHBhaXJzW2ldLnNwbGl0KFwiPVwiKSk7IGkrKykge1xyXG4gICAgICAvLyBJRVxyXG4gICAgICBpZiAoZGVjb2RlKHBhaXJbMF0pID09PSBrZXkpIHJldHVybiBkZWNvZGUocGFpclsxXSB8fCBcIlwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH07XHJcblxyXG4gICQuZm4uY29va2llQmFyID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgdmFyIHNldHRpbmdzID0gJC5leHRlbmQoXHJcbiAgICAgIHtcclxuICAgICAgICBjbG9zZUJ1dHRvbjogXCJub25lXCIsXHJcbiAgICAgICAgaGlkZU9uQ2xvc2U6IHRydWUsXHJcbiAgICAgICAgc2VjdXJlOiBmYWxzZSxcclxuICAgICAgICBwYXRoOiBcIi9cIixcclxuICAgICAgICBkb21haW46IFwiXCJcclxuICAgICAgfSxcclxuICAgICAgb3B0aW9uc1xyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgY29va2llYmFyID0gJCh0aGlzKTtcclxuXHJcbiAgICAgIC8vIGp1c3QgaW4gY2FzZSB0aGV5IGRpZG50IGhpZGUgaXQgYnkgZGVmYXVsdC5cclxuICAgICAgJChcIi51aS13aWRnZXRcIikuaGlkZSgpO1xyXG4gICAgICBjb29raWViYXIuaGlkZSgpO1xyXG5cclxuICAgICAgLy8gaWYgY2xvc2UgYnV0dG9uIG5vdCBkZWZpbmVkLiBkZWZpbmUgaXQhXHJcbiAgICAgIGlmIChzZXR0aW5ncy5jbG9zZUJ1dHRvbiA9PSBcIm5vbmVcIikge1xyXG4gICAgICAgIGNvb2tpZWJhci5hcHBlbmQoJzxhIGNsYXNzPVwiY29va2llYmFyLWNsb3NlXCI+Q29udGludWU8L2E+Jyk7XHJcbiAgICAgICAgJC5leHRlbmQoc2V0dGluZ3MsIHsgY2xvc2VCdXR0b246IFwiLmNvb2tpZWJhci1jbG9zZVwiIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoJC5jb29raWUoXCJjb29raWViYXJcIikgIT0gXCJoaWRlXCIpIHtcclxuICAgICAgICAkKFwiLnVpLXdpZGdldFwiKS5mYWRlSW4oMTAwMCk7XHJcbiAgICAgICAgY29va2llYmFyLmZhZGVJbigxMDAwKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29va2llYmFyLmZpbmQoc2V0dGluZ3MuY2xvc2VCdXR0b24pLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChzZXR0aW5ncy5oaWRlT25DbG9zZSkge1xyXG4gICAgICAgICAgY29va2llYmFyLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJC5jb29raWUoXCJjb29raWViYXJcIiwgXCJoaWRlXCIsIHtcclxuICAgICAgICAgIHBhdGg6IHNldHRpbmdzLnBhdGgsXHJcbiAgICAgICAgICBzZWN1cmU6IHNldHRpbmdzLnNlY3VyZSxcclxuICAgICAgICAgIGRvbWFpbjogc2V0dGluZ3MuZG9tYWluLFxyXG4gICAgICAgICAgZXhwaXJlczogMzBcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb29raWViYXIudHJpZ2dlcihcImNvb2tpZUJhci1jbG9zZVwiKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8gc2VsZiBpbmplY3Rpb24gaW5pdFxyXG4gICQuY29va2llQmFyID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgJChcImJvZHlcIikucHJlcGVuZChcclxuICAgICAgJzxkaXYgY2xhc3M9XCJ1aS13aWRnZXRcIj48ZGl2IHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIiBjbGFzcz1cImNvb2tpZS1tZXNzYWdlIHVpLXdpZGdldC1oZWFkZXIgYmx1ZVwiPjxwPkJ5IHVzaW5nIHRoaXMgd2Vic2l0ZSB5b3UgYWdyZWUgdG8gb3VyIHVzZSBvZiBjb29raWVzLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiA8YSBjbGFzcz1cImNvb2tpZS1saW5rXCIgaHJlZj1cIi90ZXJtcy5odG1sXCI+Y2xpY2sgaGVyZS48L2E+PC9wPjwvZGl2PjwvZGl2PidcclxuICAgICk7XHJcbiAgICAkKFwiLmNvb2tpZS1tZXNzYWdlXCIpLmNvb2tpZUJhcihvcHRpb25zKTtcclxuICB9O1xyXG59KShqUXVlcnkpO1xyXG4iLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAkKFwiLmJhY2stdG8tdG9wXCIpLmhpZGUoKTtcclxuXHJcbiAgJChcImFcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgaWYgKHRoaXMuaGFzaCAhPT0gXCJcIikge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB2YXIgaGFzaCA9IHRoaXMuaGFzaDtcclxuXHJcbiAgICAgICQoXCJodG1sLCBib2R5XCIpLmFuaW1hdGUoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgc2Nyb2xsVG9wOiAkKGhhc2gpLm9mZnNldCgpLnRvcFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgODAwLFxyXG4gICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBoYXNoO1xyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcclxuICAgIGlmICgkKHRoaXMpLnNjcm9sbFRvcCgpID4gMTUwKSB7XHJcbiAgICAgICQoXCIuYmFjay10by10b3BcIikuZmFkZUluKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkKFwiLmJhY2stdG8tdG9wXCIpLmZhZGVPdXQoKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgdmFyIHRpbWVyID0gbnVsbDtcclxuICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRpbWVyICE9PSBudWxsKSB7XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XHJcbiAgICB9XHJcbiAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICQoXCIuYmFjay10by10b3BcIikuZmFkZU91dCgpO1xyXG4gICAgfSwgMjAwMCk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iLCJjb25zdCBDb250YWN0Rm9ybVZhbGlkYXRpb24gPSAoZnVuY3Rpb24oKSB7XHJcbiAgY29uc3QgaW5wdXRzID0gW1wiI25hbWVcIiwgXCIjZW1haWxcIiwgXCIjdGVsXCIsIFwiI21lc3NhZ2VcIl07XHJcblxyXG4gIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICBmb3IgKGxldCBpbnB1dCBvZiBpbnB1dHMpIHtcclxuICAgICAgJChpbnB1dCkub24oXCJrZXl1cFwiLCBjaGVja0ZvckVtcHR5KTtcclxuICAgICAgJChpbnB1dCkub24oXCJmb2N1c291dFwiLCBhZGRPclJlbW92ZVZhbE1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gICAgJChcIiN0ZWxcIikub24oXCJrZXlkb3duXCIsIGlzTnVtYmVyS2V5KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFkZE9yUmVtb3ZlVmFsTWVzc2FnZShlKSB7XHJcbiAgICBjb25zdCBpbnB1dCA9IGUudGFyZ2V0O1xyXG4gICAgaWYgKGlucHV0LmlkID09PSBcImVtYWlsXCIpIHtcclxuICAgICAgaWYgKCEkKGlucHV0KS52YWwoKSAmJiAkKGlucHV0KS5oYXNDbGFzcyhcImRpcnR5XCIpKSB7XHJcbiAgICAgICAgJChpbnB1dCkuYWRkQ2xhc3MoXCJpbnZhbGlkXCIpO1xyXG4gICAgICAgICQoXCIuZXJyb3ItbWVzc2FnZVwiKS50ZXh0KFxyXG4gICAgICAgICAgXCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBmb3IgYWxsIHJlcXVpcmVkIGZpZWxkc1wiXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF2YWxpZGF0ZUVtYWlsKCQoXCIjZW1haWxcIikudmFsKCkpICYmICQoXCIjZW1haWxcIikudmFsKCkpIHtcclxuICAgICAgICAkKGlucHV0KS5hZGRDbGFzcyhcImludmFsaWRcIik7XHJcbiAgICAgICAgJChcIi5lcnJvci1tZXNzYWdlXCIpLnRleHQoXCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAodmFsaWRhdGVFbWFpbCgkKFwiI2VtYWlsXCIpLnZhbCgpICYmICQoaW5wdXQpLnZhbCgpKSkge1xyXG4gICAgICAgIGlmICgkKGlucHV0KS5oYXNDbGFzcyhcImludmFsaWRcIikpIHtcclxuICAgICAgICAgICQoaW5wdXQpLnJlbW92ZUNsYXNzKFwiaW52YWxpZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICghJChpbnB1dCkudmFsKCkgJiYgJChpbnB1dCkuaGFzQ2xhc3MoXCJkaXJ0eVwiKSkge1xyXG4gICAgICAgICQoaW5wdXQpLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcclxuICAgICAgICAkKFwiLmVycm9yLW1lc3NhZ2VcIikudGV4dChcclxuICAgICAgICAgIFwiUGxlYXNlIGVudGVyIGEgdmFsdWUgZm9yIGFsbCByZXF1aXJlZCBmaWVsZHNcIlxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKCQoaW5wdXQpLmhhc0NsYXNzKFwiaW52YWxpZFwiKSkge1xyXG4gICAgICAgICAgJChpbnB1dCkucmVtb3ZlQ2xhc3MoXCJpbnZhbGlkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2hlY2tGb3JFbXB0eShlKSB7XHJcbiAgICBjb25zdCBpbnB1dCA9IGUudGFyZ2V0O1xyXG4gICAgaWYgKFxyXG4gICAgICAkKGlucHV0c1swXSkudmFsKCkgJiZcclxuICAgICAgJChpbnB1dHNbMV0pLnZhbCgpICYmXHJcbiAgICAgICQoaW5wdXRzWzJdKS52YWwoKSAmJlxyXG4gICAgICAkKGlucHV0c1szXSkudmFsKCkgJiZcclxuICAgICAgdmFsaWRhdGVFbWFpbCgkKFwiI2VtYWlsXCIpLnZhbCgpKVxyXG4gICAgKSB7XHJcbiAgICAgICQoXCIjc3VibWl0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkKFwiI3N1Ym1pdFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoJChpbnB1dCkuaGFzQ2xhc3MoXCJwcmlzdGluZVwiKSkge1xyXG4gICAgICAkKGlucHV0KVxyXG4gICAgICAgIC5yZW1vdmVDbGFzcyhcInByaXN0aW5lXCIpXHJcbiAgICAgICAgLmFkZENsYXNzKFwiZGlydHlcIik7XHJcbiAgICB9XHJcbiAgICBpZiAoJChpbnB1dCkuaGFzQ2xhc3MoXCJpbnZhbGlkXCIpICYmICQoaW5wdXQpLnZhbCgpKSB7XHJcbiAgICAgICQoaW5wdXQpLnJlbW92ZUNsYXNzKFwiaW52YWxpZFwiKTtcclxuICAgIH1cclxuICAgIGlmICghJChcIi5pbnZhbGlkXCIpLmxlbmd0aCkge1xyXG4gICAgICAkKFwiLmVycm9yLW1lc3NhZ2VcIikudGV4dChcIlwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHZhbGlkYXRlRW1haWwoZW1haWwpIHtcclxuICAgIGNvbnN0IHJlID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcclxuICAgIHJldHVybiByZS50ZXN0KFN0cmluZyhlbWFpbCkudG9Mb3dlckNhc2UoKSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpc051bWJlcktleShlKSB7XHJcbiAgICBjb25zdCBrZXlDb2RlID0gd2luZG93LmV2ZW50ID8gZS5rZXlDb2RlIDogZS53aGljaDtcclxuICAgIGlmIChrZXlDb2RlIDwgNDggfHwga2V5Q29kZSA+IDU3KSB7XHJcbiAgICAgIC8vY29kZXMgZm9yIGJhY2tzcGFjZSwgZGVsZXRlLCBlbnRlclxyXG4gICAgICBpZiAoa2V5Q29kZSAhPSAwICYmIGtleUNvZGUgIT0gOCAmJiBrZXlDb2RlICE9IDEzICYmICFlLmN0cmxLZXkpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBpbml0OiBpbml0XHJcbiAgfTtcclxufSkoKTtcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gIENvbnRhY3RGb3JtVmFsaWRhdGlvbi5pbml0KCk7XHJcbn0pO1xyXG4iXX0=
