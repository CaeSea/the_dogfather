!function(e){e.cookie=function(i,o,t){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(o))||null==o)){if(t=e.extend({},t),null==o&&(t.expires=-1),"number"==typeof t.expires){var a=t.expires,n=t.expires=new Date;n.setDate(n.getDate()+a)}return o=String(o),document.cookie=[encodeURIComponent(i),"=",t.raw?o:encodeURIComponent(o),t.expires?"; expires="+t.expires.toUTCString():"",t.path?"; path="+t.path:"",t.domain?"; domain="+t.domain:"",t.secure?"; secure":""].join("")}for(var s,r=(t=o||{}).raw?function(e){return e}:decodeURIComponent,l=document.cookie.split("; "),c=0;s=l[c]&&l[c].split("=");c++)if(r(s[0])===i)return r(s[1]||"");return null},e.fn.cookieBar=function(i){var o=e.extend({closeButton:"none",hideOnClose:!0,secure:!1,path:"/",domain:""},i);return this.each(function(){var i=e(this);e(".ui-widget").hide(),i.hide(),"none"==o.closeButton&&(i.append('<a class="cookiebar-close">Continue</a>'),e.extend(o,{closeButton:".cookiebar-close"})),"hide"!=e.cookie("cookiebar")&&(e(".ui-widget").fadeIn(1e3),i.fadeIn(1e3)),i.find(o.closeButton).click(function(){return o.hideOnClose&&i.hide(),e.cookie("cookiebar","hide",{path:o.path,secure:o.secure,domain:o.domain,expires:30}),i.trigger("cookieBar-close"),!1})})},e.cookieBar=function(i){e("body").prepend('<div class="ui-widget"><div style="display: none;" class="cookie-message ui-widget-header blue"><p>By using this website you agree to our use of cookies. For more information <a class="cookie-link" href="/terms.html">click here.</a></p></div></div>'),e(".cookie-message").cookieBar(i)}}(jQuery),$(document).ready(function(){$(".back-to-top").hide(),$("a").on("click",function(e){if(""!==this.hash){e.preventDefault();var i=this.hash;$("html, body").animate({scrollTop:$(i).offset().top},800,function(){window.location.hash=i})}}),$(window).scroll(function(){$(this).scrollTop()>150?$(".back-to-top").fadeIn():$(".back-to-top").fadeOut()});var e=null;$(window).scroll(function(){null!==e&&clearTimeout(e),e=setTimeout(function(){$(".back-to-top").fadeOut()},2e3)})});const ContactFormValidation=function(){const e=["#name","#email","#tel","#message"];function i(e){const i=e.target;if("email"===i.id){if(!$(i).val()&&$(i).hasClass("dirty"))return $(i).addClass("invalid"),void $(".error-message").text("Please enter a value for all required fields");if(!t($("#email").val())&&$("#email").val())return $(i).addClass("invalid"),void $(".error-message").text("Please enter a valid email address");t($("#email").val()&&$(i).val())&&$(i).hasClass("invalid")&&$(i).removeClass("invalid")}else!$(i).val()&&$(i).hasClass("dirty")?($(i).addClass("invalid"),$(".error-message").text("Please enter a value for all required fields")):$(i).hasClass("invalid")&&$(i).removeClass("invalid")}function o(i){const o=i.target;$(e[0]).val()&&$(e[1]).val()&&$(e[2]).val()&&$(e[3]).val()&&t($("#email").val())?$("#submit").attr("disabled",!1):$("#submit").attr("disabled",!0),$(o).hasClass("pristine")&&$(o).removeClass("pristine").addClass("dirty"),$(o).hasClass("invalid")&&$(o).val()&&$(o).removeClass("invalid"),$(".invalid").length||$(".error-message").text("")}function t(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function a(e){const i=window.event?e.keyCode:e.which;(i<48||i>57)&&(0==i||8==i||13==i||e.ctrlKey||e.preventDefault())}return{init:function(){for(let t of e)$(t).on("keyup",o),$(t).on("focusout",i);$("#tel").on("keydown",a)}}}();$(document).ready(function(){ContactFormValidation.init()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvb2tpZWJhci5qcyIsInNtb290aHNjcm9sbC5qcyIsInZhbGlkYXRpb24uanMiXSwibmFtZXMiOlsiJCIsImNvb2tpZSIsImtleSIsInZhbHVlIiwib3B0aW9ucyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInRlc3QiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJleHRlbmQiLCJleHBpcmVzIiwiZGF5cyIsInQiLCJEYXRlIiwic2V0RGF0ZSIsImdldERhdGUiLCJTdHJpbmciLCJkb2N1bWVudCIsImVuY29kZVVSSUNvbXBvbmVudCIsInJhdyIsInRvVVRDU3RyaW5nIiwicGF0aCIsImRvbWFpbiIsInNlY3VyZSIsImpvaW4iLCJwYWlyIiwiZGVjb2RlIiwicyIsImRlY29kZVVSSUNvbXBvbmVudCIsInBhaXJzIiwic3BsaXQiLCJpIiwiZm4iLCJjb29raWVCYXIiLCJzZXR0aW5ncyIsImNsb3NlQnV0dG9uIiwiaGlkZU9uQ2xvc2UiLCJ0aGlzIiwiZWFjaCIsImNvb2tpZWJhciIsImhpZGUiLCJhcHBlbmQiLCJmYWRlSW4iLCJmaW5kIiwiY2xpY2siLCJ0cmlnZ2VyIiwicHJlcGVuZCIsImpRdWVyeSIsInJlYWR5Iiwib24iLCJldmVudCIsImhhc2giLCJwcmV2ZW50RGVmYXVsdCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJ0b3AiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNjcm9sbCIsImZhZGVPdXQiLCJ0aW1lciIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJDb250YWN0Rm9ybVZhbGlkYXRpb24iLCJpbnB1dHMiLCJhZGRPclJlbW92ZVZhbE1lc3NhZ2UiLCJlIiwiaW5wdXQiLCJ0YXJnZXQiLCJpZCIsInZhbCIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJ0ZXh0IiwidmFsaWRhdGVFbWFpbCIsInJlbW92ZUNsYXNzIiwiY2hlY2tGb3JFbXB0eSIsImF0dHIiLCJlbWFpbCIsInRvTG93ZXJDYXNlIiwi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QUFBLGFBQ0EzRSxFQUFBdUUsR0FDQVEsWUFBQSxZQUNBSCxTQUFBLFNBRUE1RSxFQUFBdUUsR0FBQUksU0FBQSxZQUFBM0UsRUFBQXVFLEdBQUFHLE9BQ0ExRSxFQUFBdUUsR0FBQVEsWUFBQSxXQUVBL0UsRUFBQSxZQUFBTSxRQUNBTixFQUFBLGtCQUFBNkUsS0FBQSxJQUlBLFNBQUFDLEVBQUFJLEdBRUEsTUFEQSwwSkFDQTNFLEtBQUFZLE9BQUErRCxHQUFBQyxlQUdBLFNBQUFDLEVBQUFkLEdBQ0EsTUFBQWUsRUFBQXpCLE9BQUFQLE1BQUFpQixFQUFBZSxRQUFBZixFQUFBZ0IsT0FDQUQsRUFBQSxJQUFBQSxFQUFBLE1BRUEsR0FBQUEsR0FBQSxHQUFBQSxHQUFBLElBQUFBLEdBQUFmLEVBQUFpQixTQUNBakIsRUFBQWYsa0JBS0EsTUFBQSxDQUNBaUMsS0FwRkEsV0FDQSxJQUFBLElBQUFqQixLQUFBSCxFQUNBcEUsRUFBQXVFLEdBQUFuQixHQUFBLFFBQUE0QixHQUNBaEYsRUFBQXVFLEdBQUFuQixHQUFBLFdBQUFpQixHQUVBckUsRUFBQSxRQUFBb0QsR0FBQSxVQUFBZ0MsS0FSQSxHQTJGQXBGLEVBQUFvQixVQUFBK0IsTUFBQSxXQUNBZ0Isc0JBQUFxQiIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxyXG4gKiBqUXVlcnkgQ29va2llYmFyIFBsdWdpblxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vY2FybHdvb2Rob3VzZS9qcXVlcnkuY29va2llQmFyXHJcbiAqXHJcbiAqIENvcHlyaWdodCAyMDEyLTE3LCBDYXJsIFdvb2Rob3VzZS4gdGhlIGNvb2tpZSBmdW5jdGlvbiBpcyBpbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vY2FyaGFydGwvanF1ZXJ5LWNvb2tpZVxyXG4gKiBEaXNjbGFpbWVyOiBpZiB5b3Ugc3RpbGwgZ2V0IGZpbmVkIGZvciBub3QgY29tcGx5aW5nIHdpdGggdGhlIGV1IGNvb2tpZWxhdywgaXQncyBub3Qgb3VyIGZhdWx0LlxyXG4gKiBMaWNlbmNlOiBNSVRcclxuICovXHJcblxyXG4oZnVuY3Rpb24oJCkge1xyXG4gICQuY29va2llID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSwgb3B0aW9ucykge1xyXG4gICAgaWYgKFxyXG4gICAgICBhcmd1bWVudHMubGVuZ3RoID4gMSAmJlxyXG4gICAgICAoIS9PYmplY3QvLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSkgfHxcclxuICAgICAgICB2YWx1ZSA9PT0gbnVsbCB8fFxyXG4gICAgICAgIHZhbHVlID09PSB1bmRlZmluZWQpXHJcbiAgICApIHtcclxuICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBvcHRpb25zKTtcclxuXHJcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgb3B0aW9ucy5leHBpcmVzID0gLTE7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5leHBpcmVzID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgdmFyIGRheXMgPSBvcHRpb25zLmV4cGlyZXMsXHJcbiAgICAgICAgICB0ID0gKG9wdGlvbnMuZXhwaXJlcyA9IG5ldyBEYXRlKCkpO1xyXG4gICAgICAgIHQuc2V0RGF0ZSh0LmdldERhdGUoKSArIGRheXMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSk7XHJcblxyXG4gICAgICByZXR1cm4gKGRvY3VtZW50LmNvb2tpZSA9IFtcclxuICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoa2V5KSxcclxuICAgICAgICBcIj1cIixcclxuICAgICAgICBvcHRpb25zLnJhdyA/IHZhbHVlIDogZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSxcclxuICAgICAgICBvcHRpb25zLmV4cGlyZXMgPyBcIjsgZXhwaXJlcz1cIiArIG9wdGlvbnMuZXhwaXJlcy50b1VUQ1N0cmluZygpIDogXCJcIiwgLy8gbWF4LWFnZSBpcyBub3Qgc3VwcG9ydGVkIGJ5IElFXHJcbiAgICAgICAgb3B0aW9ucy5wYXRoID8gXCI7IHBhdGg9XCIgKyBvcHRpb25zLnBhdGggOiBcIlwiLFxyXG4gICAgICAgIG9wdGlvbnMuZG9tYWluID8gXCI7IGRvbWFpbj1cIiArIG9wdGlvbnMuZG9tYWluIDogXCJcIixcclxuICAgICAgICBvcHRpb25zLnNlY3VyZSA/IFwiOyBzZWN1cmVcIiA6IFwiXCJcclxuICAgICAgXS5qb2luKFwiXCIpKTtcclxuICAgIH1cclxuICAgIG9wdGlvbnMgPSB2YWx1ZSB8fCB7fTtcclxuICAgIHZhciBkZWNvZGUgPSBvcHRpb25zLnJhd1xyXG4gICAgICA/IGZ1bmN0aW9uKHMpIHtcclxuICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgIH1cclxuICAgICAgOiBkZWNvZGVVUklDb21wb25lbnQ7XHJcblxyXG4gICAgdmFyIHBhaXJzID0gZG9jdW1lbnQuY29va2llLnNwbGl0KFwiOyBcIik7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgcGFpcjsgKHBhaXIgPSBwYWlyc1tpXSAmJiBwYWlyc1tpXS5zcGxpdChcIj1cIikpOyBpKyspIHtcclxuICAgICAgLy8gSUVcclxuICAgICAgaWYgKGRlY29kZShwYWlyWzBdKSA9PT0ga2V5KSByZXR1cm4gZGVjb2RlKHBhaXJbMV0gfHwgXCJcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9O1xyXG5cclxuICAkLmZuLmNvb2tpZUJhciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgIHZhciBzZXR0aW5ncyA9ICQuZXh0ZW5kKFxyXG4gICAgICB7XHJcbiAgICAgICAgY2xvc2VCdXR0b246IFwibm9uZVwiLFxyXG4gICAgICAgIGhpZGVPbkNsb3NlOiB0cnVlLFxyXG4gICAgICAgIHNlY3VyZTogZmFsc2UsXHJcbiAgICAgICAgcGF0aDogXCIvXCIsXHJcbiAgICAgICAgZG9tYWluOiBcIlwiXHJcbiAgICAgIH0sXHJcbiAgICAgIG9wdGlvbnNcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGNvb2tpZWJhciA9ICQodGhpcyk7XHJcblxyXG4gICAgICAvLyBqdXN0IGluIGNhc2UgdGhleSBkaWRudCBoaWRlIGl0IGJ5IGRlZmF1bHQuXHJcbiAgICAgICQoXCIudWktd2lkZ2V0XCIpLmhpZGUoKTtcclxuICAgICAgY29va2llYmFyLmhpZGUoKTtcclxuXHJcbiAgICAgIC8vIGlmIGNsb3NlIGJ1dHRvbiBub3QgZGVmaW5lZC4gZGVmaW5lIGl0IVxyXG4gICAgICBpZiAoc2V0dGluZ3MuY2xvc2VCdXR0b24gPT0gXCJub25lXCIpIHtcclxuICAgICAgICBjb29raWViYXIuYXBwZW5kKCc8YSBjbGFzcz1cImNvb2tpZWJhci1jbG9zZVwiPkNvbnRpbnVlPC9hPicpO1xyXG4gICAgICAgICQuZXh0ZW5kKHNldHRpbmdzLCB7IGNsb3NlQnV0dG9uOiBcIi5jb29raWViYXItY2xvc2VcIiB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCQuY29va2llKFwiY29va2llYmFyXCIpICE9IFwiaGlkZVwiKSB7XHJcbiAgICAgICAgJChcIi51aS13aWRnZXRcIikuZmFkZUluKDEwMDApO1xyXG4gICAgICAgIGNvb2tpZWJhci5mYWRlSW4oMTAwMCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvb2tpZWJhci5maW5kKHNldHRpbmdzLmNsb3NlQnV0dG9uKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoc2V0dGluZ3MuaGlkZU9uQ2xvc2UpIHtcclxuICAgICAgICAgIGNvb2tpZWJhci5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQuY29va2llKFwiY29va2llYmFyXCIsIFwiaGlkZVwiLCB7XHJcbiAgICAgICAgICBwYXRoOiBzZXR0aW5ncy5wYXRoLFxyXG4gICAgICAgICAgc2VjdXJlOiBzZXR0aW5ncy5zZWN1cmUsXHJcbiAgICAgICAgICBkb21haW46IHNldHRpbmdzLmRvbWFpbixcclxuICAgICAgICAgIGV4cGlyZXM6IDMwXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29va2llYmFyLnRyaWdnZXIoXCJjb29raWVCYXItY2xvc2VcIik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vIHNlbGYgaW5qZWN0aW9uIGluaXRcclxuICAkLmNvb2tpZUJhciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgICQoXCJib2R5XCIpLnByZXBlbmQoXHJcbiAgICAgICc8ZGl2IGNsYXNzPVwidWktd2lkZ2V0XCI+PGRpdiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCIgY2xhc3M9XCJjb29raWUtbWVzc2FnZSB1aS13aWRnZXQtaGVhZGVyIGJsdWVcIj48cD5CeSB1c2luZyB0aGlzIHdlYnNpdGUgeW91IGFncmVlIHRvIG91ciB1c2Ugb2YgY29va2llcy4gRm9yIG1vcmUgaW5mb3JtYXRpb24gPGEgY2xhc3M9XCJjb29raWUtbGlua1wiIGhyZWY9XCIvdGVybXMuaHRtbFwiPmNsaWNrIGhlcmUuPC9hPjwvcD48L2Rpdj48L2Rpdj4nXHJcbiAgICApO1xyXG4gICAgJChcIi5jb29raWUtbWVzc2FnZVwiKS5jb29raWVCYXIob3B0aW9ucyk7XHJcbiAgfTtcclxufSkoalF1ZXJ5KTtcclxuIiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgJChcIi5iYWNrLXRvLXRvcFwiKS5oaWRlKCk7XHJcblxyXG4gICQoXCJhXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgIGlmICh0aGlzLmhhc2ggIT09IFwiXCIpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdmFyIGhhc2ggPSB0aGlzLmhhc2g7XHJcblxyXG4gICAgICAkKFwiaHRtbCwgYm9keVwiKS5hbmltYXRlKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHNjcm9sbFRvcDogJChoYXNoKS5vZmZzZXQoKS50b3BcclxuICAgICAgICB9LFxyXG4gICAgICAgIDgwMCxcclxuICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gaGFzaDtcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoJCh0aGlzKS5zY3JvbGxUb3AoKSA+IDE1MCkge1xyXG4gICAgICAkKFwiLmJhY2stdG8tdG9wXCIpLmZhZGVJbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJChcIi5iYWNrLXRvLXRvcFwiKS5mYWRlT3V0KCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHZhciB0aW1lciA9IG51bGw7XHJcbiAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aW1lciAhPT0gbnVsbCkge1xyXG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xyXG4gICAgfVxyXG4gICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAkKFwiLmJhY2stdG8tdG9wXCIpLmZhZGVPdXQoKTtcclxuICAgIH0sIDIwMDApO1xyXG4gIH0pO1xyXG59KTtcclxuIiwiY29uc3QgQ29udGFjdEZvcm1WYWxpZGF0aW9uID0gKGZ1bmN0aW9uKCkge1xyXG4gIGNvbnN0IGlucHV0cyA9IFtcIiNuYW1lXCIsIFwiI2VtYWlsXCIsIFwiI3RlbFwiLCBcIiNtZXNzYWdlXCJdO1xyXG5cclxuICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgZm9yIChsZXQgaW5wdXQgb2YgaW5wdXRzKSB7XHJcbiAgICAgICQoaW5wdXQpLm9uKFwia2V5dXBcIiwgY2hlY2tGb3JFbXB0eSk7XHJcbiAgICAgICQoaW5wdXQpLm9uKFwiZm9jdXNvdXRcIiwgYWRkT3JSZW1vdmVWYWxNZXNzYWdlKTtcclxuICAgIH1cclxuICAgICQoXCIjdGVsXCIpLm9uKFwia2V5ZG93blwiLCBpc051bWJlcktleSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhZGRPclJlbW92ZVZhbE1lc3NhZ2UoZSkge1xyXG4gICAgY29uc3QgaW5wdXQgPSBlLnRhcmdldDtcclxuICAgIGlmIChpbnB1dC5pZCA9PT0gXCJlbWFpbFwiKSB7XHJcbiAgICAgIGlmICghJChpbnB1dCkudmFsKCkgJiYgJChpbnB1dCkuaGFzQ2xhc3MoXCJkaXJ0eVwiKSkge1xyXG4gICAgICAgICQoaW5wdXQpLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcclxuICAgICAgICAkKFwiLmVycm9yLW1lc3NhZ2VcIikudGV4dChcclxuICAgICAgICAgIFwiUGxlYXNlIGVudGVyIGEgdmFsdWUgZm9yIGFsbCByZXF1aXJlZCBmaWVsZHNcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghdmFsaWRhdGVFbWFpbCgkKFwiI2VtYWlsXCIpLnZhbCgpKSAmJiAkKFwiI2VtYWlsXCIpLnZhbCgpKSB7XHJcbiAgICAgICAgJChpbnB1dCkuYWRkQ2xhc3MoXCJpbnZhbGlkXCIpO1xyXG4gICAgICAgICQoXCIuZXJyb3ItbWVzc2FnZVwiKS50ZXh0KFwiUGxlYXNlIGVudGVyIGEgdmFsaWQgZW1haWwgYWRkcmVzc1wiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHZhbGlkYXRlRW1haWwoJChcIiNlbWFpbFwiKS52YWwoKSAmJiAkKGlucHV0KS52YWwoKSkpIHtcclxuICAgICAgICBpZiAoJChpbnB1dCkuaGFzQ2xhc3MoXCJpbnZhbGlkXCIpKSB7XHJcbiAgICAgICAgICAkKGlucHV0KS5yZW1vdmVDbGFzcyhcImludmFsaWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoISQoaW5wdXQpLnZhbCgpICYmICQoaW5wdXQpLmhhc0NsYXNzKFwiZGlydHlcIikpIHtcclxuICAgICAgICAkKGlucHV0KS5hZGRDbGFzcyhcImludmFsaWRcIik7XHJcbiAgICAgICAgJChcIi5lcnJvci1tZXNzYWdlXCIpLnRleHQoXHJcbiAgICAgICAgICBcIlBsZWFzZSBlbnRlciBhIHZhbHVlIGZvciBhbGwgcmVxdWlyZWQgZmllbGRzXCJcclxuICAgICAgICApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICgkKGlucHV0KS5oYXNDbGFzcyhcImludmFsaWRcIikpIHtcclxuICAgICAgICAgICQoaW5wdXQpLnJlbW92ZUNsYXNzKFwiaW52YWxpZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNoZWNrRm9yRW1wdHkoZSkge1xyXG4gICAgY29uc3QgaW5wdXQgPSBlLnRhcmdldDtcclxuICAgIGlmIChcclxuICAgICAgJChpbnB1dHNbMF0pLnZhbCgpICYmXHJcbiAgICAgICQoaW5wdXRzWzFdKS52YWwoKSAmJlxyXG4gICAgICAkKGlucHV0c1syXSkudmFsKCkgJiZcclxuICAgICAgJChpbnB1dHNbM10pLnZhbCgpICYmXHJcbiAgICAgIHZhbGlkYXRlRW1haWwoJChcIiNlbWFpbFwiKS52YWwoKSlcclxuICAgICkge1xyXG4gICAgICAkKFwiI3N1Ym1pdFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgZmFsc2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJChcIiNzdWJtaXRcIikuYXR0cihcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgaWYgKCQoaW5wdXQpLmhhc0NsYXNzKFwicHJpc3RpbmVcIikpIHtcclxuICAgICAgJChpbnB1dClcclxuICAgICAgICAucmVtb3ZlQ2xhc3MoXCJwcmlzdGluZVwiKVxyXG4gICAgICAgIC5hZGRDbGFzcyhcImRpcnR5XCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKCQoaW5wdXQpLmhhc0NsYXNzKFwiaW52YWxpZFwiKSAmJiAkKGlucHV0KS52YWwoKSkge1xyXG4gICAgICAkKGlucHV0KS5yZW1vdmVDbGFzcyhcImludmFsaWRcIik7XHJcbiAgICB9XHJcbiAgICBpZiAoISQoXCIuaW52YWxpZFwiKS5sZW5ndGgpIHtcclxuICAgICAgJChcIi5lcnJvci1tZXNzYWdlXCIpLnRleHQoXCJcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB2YWxpZGF0ZUVtYWlsKGVtYWlsKSB7XHJcbiAgICBjb25zdCByZSA9IC9eKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XHJcbiAgICByZXR1cm4gcmUudGVzdChTdHJpbmcoZW1haWwpLnRvTG93ZXJDYXNlKCkpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaXNOdW1iZXJLZXkoZSkge1xyXG4gICAgY29uc3Qga2V5Q29kZSA9IHdpbmRvdy5ldmVudCA/IGUua2V5Q29kZSA6IGUud2hpY2g7XHJcbiAgICBpZiAoa2V5Q29kZSA8IDQ4IHx8IGtleUNvZGUgPiA1Nykge1xyXG4gICAgICAvL2NvZGVzIGZvciBiYWNrc3BhY2UsIGRlbGV0ZSwgZW50ZXJcclxuICAgICAgaWYgKGtleUNvZGUgIT0gMCAmJiBrZXlDb2RlICE9IDggJiYga2V5Q29kZSAhPSAxMyAmJiAhZS5jdHJsS2V5KSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaW5pdDogaW5pdFxyXG4gIH07XHJcbn0pKCk7XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICBDb250YWN0Rm9ybVZhbGlkYXRpb24uaW5pdCgpO1xyXG59KTtcclxuIl19
